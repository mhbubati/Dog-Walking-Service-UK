<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üêæ Build Your Dog-Walking Business (UK)!</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      min-height: 100vh;
      padding: 15px;
      color: #1a237e;
    }
    .container {
      max-width: 750px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      padding: 25px;
      text-align: center;
    }
    h1, h2 {
      color: #1976d2;
    }
    h1 { font-size: 26px; margin: 15px 0; }
    .emoji {
      font-size: 36px;
      display: block;
      margin: 10px 0;
      line-height: 1;
    }
    .step-title {
      font-size: 20px;
      font-weight: bold;
      color: #0d47a1;
      margin: 15px 0 8px;
    }
    .step-prompt {
      font-size: 17px;
      margin-bottom: 12px;
      color: #37474f;
    }
    .error-message {
      color: #d32f2f;
      font-size: 15px;
      margin: 8px 0;
      min-height: 20px;
    }
    textarea {
      width: 100%;
      height: 110px;
      padding: 12px;
      border: 2px solid #90caf9;
      border-radius: 12px;
      font-size: 16px;
      margin: 12px 0;
      resize: vertical;
      background-color: #e3f2fd;
    }
    button {
      background: #1976d2;
      color: white;
      border: none;
      padding: 11px 22px;
      font-size: 17px;
      border-radius: 50px;
      cursor: pointer;
      margin: 8px;
      font-weight: bold;
      transition: background 0.25s;
    }
    button:hover {
      background: #1565c0;
    }
    button:focus, textarea:focus {
      outline: 2px solid #1976d2;
      outline-offset: 2px;
    }
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    #bmcDiagram, #finalBmcGrid {
      margin: 20px auto;
      max-width: 650px;
    }
    .bmc-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      font-size: 12px;
    }
    .bmc-cell {
      padding: 10px;
      border-radius: 6px;
      font-size: 12px;
      line-height: 1.4;
    }
    .bmc-cell.vp {
      grid-column: span 3;
      padding: 12px;
    }
    .bmc-cell.cs {
      grid-column: span 2;
    }
    .bmc-cell.rs {
      grid-column: span 2;
    }
    .bmc-label {
      font-weight: bold;
      font-size: 11px;
      color: #0d47a1;
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .bmc-answer {
      font-size: 13px;
      color: #222;
    }
    .hidden { display: none; }
    .progress { font-size: 14px; color: #546e7a; margin-bottom: 12px; }

    @media print {
      body {
        background: white;
        color: black;
      }
      .container {
        box-shadow: none;
        border: 1px solid #ccc;
      }
      button {
        display: none;
      }
      .emoji {
        font-size: 24px;
      }
      .hidden {
        display: block !important;
      }
      .bmc-cell {
        padding: 6px;
      }
      .bmc-label {
        font-size: 9px;
      }
      .bmc-answer {
        font-size: 10px;
      }
    }

    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="startScreen">
      <span class="emoji" aria-hidden="true">üêæ</span>
      <h1>Build Your Dog-Walking Business (UK)!</h1>
      <p>You‚Äôve learned the Business Model Canvas.<br/>Now apply it to a new idea ‚Äî <strong>without hints</strong>.</p>
      
      <div id="bmcDiagram">
        <div class="bmc-grid">
          <div class="bmc-cell" style="background:#e8f5e9;">Key Partners</div>
          <div class="bmc-cell" style="background:#e8f5e9;">Key Activities</div>
          <div class="bmc-cell" style="background:#e8f5e9;">Key Resources</div>
          
          <div class="bmc-cell vp" style="background:#c8e6c9;">Value Propositions</div>
          
          <div class="bmc-cell" style="background:#a5d6a7;">Customer<br>Relationships</div>
          <div class="bmc-cell" style="background:#a5d6a7;">Channels</div>
          
          <div class="bmc-cell cs" style="background:#81c784;">Customer Segments</div>
          
          <div class="bmc-cell" style="background:#ffccbc;">Cost<br>Structure</div>
          <div class="bmc-cell rs" style="background:#ffab91;">Revenue<br>Streams</div>
        </div>
      </div>
      
      <p>Ready to build your service business?</p>
      <button type="button" onclick="startChallenge()">Start Building!</button>
    </div>

    <div id="stepScreen" class="hidden">
      <div class="progress">Step <span id="stepNum">1</span> of 9</div>
      <div class="step-title" id="stepTitle">Customer Segments</div>
      <div class="step-prompt" id="stepPrompt">Who needs your dog-walking service?</div>
      <div id="errorMessage" class="error-message"></div>
      
      <label for="userInput" class="visually-hidden">Your answer for <span id="ariaBlockName">Customer Segments</span></label>
      <textarea id="userInput" placeholder="Think deeply..."></textarea>
      
      <button type="button" onclick="goBack()" id="backBtn">‚Üê Back</button>
      <button type="button" onclick="nextStep()">Next ‚Üí</button>
    </div>

    <div id="finalScreen" class="hidden">
      <span class="emoji" aria-hidden="true">üèÜ</span>
      <h1>Your Dog-Walking Business BMC!</h1>
      <div id="finalCanvas"></div>
      <br/>
      <button type="button" onclick="startChallenge()">Try Again</button>
      <button type="button" onclick="printCanvas()">Print/Save</button>
    </div>
  </div>

  <script>
    const blocks = [
      { name: "Customer Segments", prompt: "Who needs your dog-walking service?" },
      { name: "Value Propositions", prompt: "What makes your service special?" },
      { name: "Channels", prompt: "How will customers find or book you?" },
      { name: "Customer Relationships", prompt: "How will you build trust and repeat business?" },
      { name: "Revenue Streams", prompt: "How do you make money?" },
      { name: "Key Resources", prompt: "What do you NEED to run your service?" },
      { name: "Key Activities", prompt: "What will you DO every day?" },
      { name: "Key Partnerships", prompt: "Who can help you succeed?" },
      { name: "Cost Structure", prompt: "What will cost you money?" }
    ];

    let answers = [];
    let currentStep = 0;

    function startChallenge() {
      answers = Array(9).fill("");
      currentStep = 0;
      document.getElementById("startScreen").classList.add("hidden");
      document.getElementById("finalScreen").classList.add("hidden");
      document.getElementById("stepScreen").classList.remove("hidden");
      loadStep(0);
    }

    function loadStep(step) {
      currentStep = step;
      const block = blocks[step];
      document.getElementById("stepTitle").textContent = block.name;
      document.getElementById("stepPrompt").textContent = block.prompt;
      document.getElementById("stepNum").textContent = step + 1;
      document.getElementById("userInput").value = answers[step] || "";
      document.getElementById("ariaBlockName").textContent = block.name;
      
      const backBtn = document.getElementById("backBtn");
      backBtn.disabled = (step === 0);
      document.getElementById("errorMessage").textContent = "";
    }

    function nextStep() {
      const input = document.getElementById("userInput").value.trim();
      const errorMsg = document.getElementById("errorMessage");
      
      if (input === "") {
        errorMsg.textContent = "Please write your own idea ‚Äî you‚Äôve got this! üê∂";
        return;
      }
      
      errorMsg.textContent = "";
      answers[currentStep] = input;
      
      if (currentStep < 8) {
        loadStep(currentStep + 1);
      } else {
        showFinalCanvas();
      }
    }

    function goBack() {
      if (currentStep > 0) {
        loadStep(currentStep - 1);
      }
    }

    function showFinalCanvas() {
      const gridCells = [
        { label: "Key Partners", answer: answers[7] },
        { label: "Key Activities", answer: answers[6] },
        { label: "Key Resources", answer: answers[5] },
        { label: "Value Propositions", answer: answers[1] },
        { label: "Customer Relationships", answer: answers[3] },
        { label: "Channels", answer: answers[2] },
        { label: "Customer Segments", answer: answers[0] },
        { label: "Cost Structure", answer: answers[8] },
        { label: "Revenue Streams", answer: answers[4] }
      ];

      let html = '<h2>Your Dog-Walking Business Model <span aria-hidden="true">üêæ</span></h2>';
      html += '<div class="bmc-grid" id="finalBmcGrid">';

      gridCells.forEach((cell, index) => {
        let cellClass = "bmc-cell";
        let style = "";

        if (index === 3) {
          cellClass += " vp";
          style = "background:#c8e6c9;";
        } else if (index === 6) {
          cellClass += " cs";
          style = "background:#81c784;";
        } else if (index === 8) {
          cellClass += " rs";
          style = "background:#ffab91;";
        } else if (index === 7) {
          style = "background:#ffccbc;";
        } else if (index === 4 || index === 5) {
          style = "background:#a5d6a7;";
        } else {
          style = "background:#e8f5e9;";
        }

        html += `
          <div class="${cellClass}" style="${style}">
            <div class="bmc-label">${cell.label}</div>
            <div class="bmc-answer">${cell.answer}</div>
          </div>
        `;
      });

      html += '</div>';
      html += '<br/><p style="font-size:15px; color:#1a237e; font-style:italic;">Well done! You applied the BMC to a real service idea.</p>';

      document.getElementById("finalCanvas").innerHTML = html;
      document.getElementById("stepScreen").classList.add("hidden");
      document.getElementById("finalScreen").classList.remove("hidden");
    }

    function printCanvas() {
      window.print();
    }
  </script>
</body>
</html>
